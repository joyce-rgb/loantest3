<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼æ¥­èè³‡è¨ºæ–·ç³»çµ±</title>
    <style>
        :root { --primary: #007bff; --line: #06C755; --bg: #f8f9fa; }
        body { font-family: sans-serif; background: var(--bg); display: flex; flex-direction: column; align-items: center; padding: 0; margin: 0; }
        
        /* å…è²¬è²æ˜æ¨£å¼ */
        .disclaimer {
            width: 100%;
            background-color: #fff3cd;
            color: #856404;
            text-align: center;
            padding: 10px 0;
            font-size: 0.9rem;
            border-bottom: 1px solid #ffeeba;
            font-weight: bold;
        }

        .container { display: flex; justify-content: center; width: 100%; padding: 40px 20px; box-sizing: border-box; }
        .card { background: white; padding: 2rem; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 100%; max-width: 450px; text-align: center; }
        .status-DANGER { border-top: 10px solid #dc3545; }
        .status-SUCCESS { border-top: 10px solid #28a745; }
        
        .option-btn { display: block; width: 100%; padding: 14px; margin: 10px 0; border: 1px solid #ddd; border-radius: 10px; cursor: pointer; background: white; font-size: 1rem; }
        .option-btn:hover { background: #f1f3f5; }
        
        .external-btn { display: block; width: 100%; padding: 16px; margin-top: 15px; color: white; text-decoration: none; border-radius: 12px; font-weight: bold; font-size: 1.05rem; box-sizing: border-box; }
        .btn-line { background: var(--line); }
        .btn-blue { background: var(--primary); }
        
        .tips-text { font-size: 0.9rem; color: #666; margin-top: 15px; }
    </style>
</head>
<body>

<div class="disclaimer">
    âš ï¸ æ¸¬é©—çµæœåƒ…ä¾›åƒè€ƒï¼Œè©³ç´°è²¸æ¬¾æƒ…æ³èˆ‡æ ¸è²¸æ¢ä»¶ä»é ˆè«®è©¢æ‰¿è¾¦éŠ€è¡Œã€‚
</div>

<div class="container">
    <div id="app" class="card">
        <div id="display">è¼‰å…¥ä¸­...</div>
        <div id="options"></div>
        <div id="links"></div>
    </div>
</div>

<script>
    async function load(id = 'START', idx = null) {
        // é‡è¦ï¼šè·¯å¾‘å°æ‡‰æ‚¨çš„ check.js
        let url = `/api/check?currentId=${id}`;
        if (idx !== null) url += `&optionIndex=${idx}`;
        
        try {
            const res = await fetch(url);
            const data = await res.json();
            
            document.getElementById('app').className = `card status-${data.status}`;
            document.getElementById('display').innerHTML = `
                <h2>${data.title}</h2>
                <p>${data.question || data.content}</p>
                ${data.tips ? `<p class="tips-text">ğŸ’¡ ${data.tips}</p>` : ''}
            `;
            
            const optArea = document.getElementById('options');
            optArea.innerHTML = '';
            data.options.forEach((opt, i) => {
                const b = document.createElement('button');
                b.className = 'option-btn';
                b.innerText = opt.label;
                b.onclick = () => load(data.id, i);
                optArea.appendChild(b);
            });

            const linkArea = document.getElementById('links');
            linkArea.innerHTML = '';
            data.externalLinks.forEach(l => {
                const a = document.createElement('a');
                a.href = l.url; a.target = '_blank'; a.innerText = l.label;
                a.className = `external-btn ${l.url.includes('lin.ee') ? 'btn-line' : 'btn-blue'}`;
                linkArea.appendChild(a);
            });
        } catch (e) {
            document.getElementById('display').innerHTML = "é€£ç·šå¤±æ•—ï¼Œè«‹ç¢ºèª api è³‡æ–™å¤¾å…§æ˜¯å¦æœ‰ check.js";
        }
    }
    load();
</script>
</body>
</html>
